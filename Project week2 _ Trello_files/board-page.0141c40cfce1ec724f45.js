(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{"./app/scripts/controller/boardPage.js":function(e,t,a){const s=a("./node_modules/react/index.js"),{importWithRetry:r}=a("./packages/use-lazy-component/index.ts"),i=a("./node_modules/bluebird/js/browser/bluebird.js"),n=a("./app/scripts/lib/recents.js"),o=a("./packages/jquery/index.js"),c=a("./node_modules/moment/moment.js"),l=a("./node_modules/effing/lib/index.js"),d=a("./app/scripts/network/api-error.js"),p=a("./app/scripts/db/auth.js"),{verticals:u}=a("./app/scripts/views/onboarding/constants.js"),{featureFlagClient:h}=a("./packages/feature-flag-client/index.ts"),{navigate:m}=a("./app/scripts/controller/navigate.js"),{getSpinner:g}=a("./app/src/getSpinner.ts"),{currentModelManager:b}=a("./app/scripts/controller/currentModelManager.ts"),{CardDetailLoading:f}=a("./app/src/components/CardDetailLoading/index.ts"),{CardDetailLoadingError:v}=a("./app/src/components/CardDetailLoadingError/index.ts"),{sendChunkLoadErrorEvent:w}=a("./packages/error-reporting/index.ts"),y=function(e){const t=parseInt(e,10);return isNaN(t)?void 0:t};e.exports={cardDetailViewChunkLoaded:!1,boardReferralPage(e,t,a){return this.boardPage(e,"",a)},boardPage(e,t,a){null==t&&(t="");const[,s,...r]=Array.from(t.split("?")[0].split("/")),i={idBoard:e,referrerUsername:a};if("calendar"===s){const e=c().startOf("day");e.year(y(r[0])),e.month(function(e,t){return null!=t?e(t):void 0}(l.sub(1),y(r[1]))),e.date(y(r[2])),e.isValid()&&(i.calendarDate=e.toDate())}if("map"===s&&null!=r[0]&&null!=r[1]){const e=parseFloat(r[0]),t=parseFloat(r[1]),a=parseInt(r[2],10);e&&t&&(i.mapCenterTo={lat:e,lng:t}),a&&(i.zoom=a)}return"member"===s&&null!=r[0]&&(i.usernameBoardProfile=r[0]),"power-ups"===s&&null!=r[0]&&(i.directorySection=r[0],null!=r[1]&&(i.directoryCategory=r[1])),"power-up"===s&&null!=r[0]&&(i.directoryIdPowerUp=r[0],null!=r[1]&&"enable"===r[1]?i.directoryIsEnabling=!0:"view"===r[1]&&null!=r[2]&&(i.powerUpViewKey=r[2])),"butler"===s&&r.length&&("edit"===r[0]&&r[1]?i.butlerCmdEdit=r[1]:"log"===r[0]&&r[1]?i.butlerCmdLog=r[1]:(i.butlerTab=r[0],r[1]&&"new"===r[1]?i.butlerCmdEdit=r[1]:r[1]&&"edit"===r[1]&&r[2]?i.butlerCmdEdit=r[2]:r[1]&&"log"===r[1]&&r[2]&&(i.butlerCmdLog=r[2]))),["calendar","member","power-up","power-ups","map","butler","timeline","calendar-view","dashboard"].includes(s)&&(i.section=s),this.displayBoard(i).done()},oldBoardPage(e){const t={},a=e.split("/");return 1===a.length?t.idBoard=a[0]:t.idBoard=a[1],3===a.length?t.section=a[2]:4===a.length&&(t.usernameBoardProfile=a[3]),this.displayBoard(t).done()},cardPage(e,t){const a=location.hash.length>1?location.hash.substr(1):null,s=this.getQueryParamByKey("replyToComment");return this.displayBoard({idCard:e,highlight:a,replyToComment:s}).done()},oldCardPage(e,t,s){return(()=>{if(/^\d+$/.test(s)){return a("./app/scripts/db/model-loader.js").for("top-level","loadCardId",t,s).catch(d,(()=>null))}return i.resolve(s)})().then((e=>this.displayBoard({idBoard:t,idCard:e}).done()))},showCardDetail(t,o){null==o&&(o={});const{highlight:c,runMethod:l,isNavigating:d,replyToComment:p,onHide:u,onSuccess:h,onFail:g,onAbort:y}=o;if(null==t)return void(y&&y(new Error("card is null")));if(!b.onBoardView((C=t.getBoard(),j=e=>e.id,null!=C?j(C):void 0))||t.modelCache!==this.getCurrentModelCache())return m(this.getCardUrl(t,c,p),{trigger:!0}),void(y&&y(new Error("card is on another board")));var C,j;const k=t.getBoard();let x=!1;const L=a("./app/scripts/views/lib/dialog.js");return e.exports.cardDetailViewChunkLoaded||L.show({reactElement:s.createElement(f,null),hide:()=>{x=!0,u&&u()}}),i.all([r((()=>a.e(41).then(a.t.bind(null,"./app/scripts/views/board/board-view.js",7)))),r((()=>a.e(50).then(a.t.bind(null,"./app/scripts/views/card/card-detail-view.js",7))))]).then((([{default:s},{default:r}])=>{if(e.exports.cardDetailViewChunkLoaded=!0,x)return void(y&&y(new Error("isInterrupted")));const i=new r({modelCache:this.getCurrentModelCache(),model:t}),o=t.getBoard()&&this.applicationView.existingSubviewOrUndefined(s,t.getBoard()),g=this.showingCalendar(o),b=this.showingMap(o);let f,v="";if(g&&(v="calendar"),b){v="map",o.mapReturnCard=null;const e=o.mapView;e.mapCenterTo&&e.zoom&&(f=[e.mapCenterTo.lat,e.mapCenterTo.lng,e.zoom])}this.showingTimeline()&&(v="timeline"),this.showingAdvancedCalendar()&&(v="calendar-view"),L.show({view:i,hide:e=>{a("./app/scripts/views/internal/attachment-viewer.js").clear(),e||(this.setBoardLocation(k.id,v,f),this.title(k.get("name"))),u&&u()},isNavigating:d}),this.waitForId(t,(()=>(m(this.getCardUrl(t,c,p),{replace:this.onCardView(),trigger:!1}),n.add("card",t.id)))),null!=l&&i[l](),null!=c&&i.highlight(c,!0),null!=p&&i.replyToComment(p),h&&h()})).catch((e=>{L.show({reactElement:s.createElement(v,null),hide:()=>{u&&u()}}),w(e),g&&g(e)}))},createFirstBoardPage(){return i.using(g(),(()=>a("./app/scripts/db/model-loader.js").await("boardsData").then((()=>{const e=p.me();if(!e.isLoggedIn())return window.location="/login";if(h.get("activation.onboarding_v2",!1)){const e=new URLSearchParams(window.location.search).get("selectedVertical");if(!u[e]&&"default"!==e)return m("welcome",{trigger:!0})}else{if(e.boardList.length>0||e.isDismissed("create-first-board"))return m("/",{trigger:!0})}this.clearPreviousView(),this.setViewType("create-first-board"),this.title("Create Your Board");const t=a("./app/scripts/views/onboarding/create-first-board-view.js"),s=this.topLevelView(t,e);return o('[data-js-id="header-container"]').hide(),o("#content").html(s.render().el)})))).done()},onboardingPage(){return i.using(g(),(()=>a("./app/scripts/db/model-loader.js").await("boardsData").then((()=>{const e=p.me();if(!e.isLoggedIn())return window.location="/login";if(!h.get("activation.onboarding_v2",!1))return m("/",{trigger:!0});this.clearPreviousView(),this.setViewType("onboarding-welcome"),this.title("Welcome To Trello");const t=a("./app/scripts/views/onboarding/welcome-view.js"),s=this.topLevelView(t,e);return o('[data-js-id="header-container"]').hide(),o("#content").html(s.render().el)})))).done()}}},"./app/scripts/lib/recents.js":function(e,t,a){const{TrelloStorage:s}=a("./packages/storage/index.ts"),r=a("./node_modules/underscore/underscore.js");e.exports=new class{_getKey(e){return"recent_".concat(e)}add(e,t){const a=this.get(e),i=r.chain([t,...Array.from(a)]).uniq().first(10).value();return s.set(this._getKey(e),i)}get(e,t){let a;return null==t&&(t=10),r.chain(null!=(a=s.get(this._getKey(e)))?a:[]).compact().first(t).value()}}},"./app/scripts/views/onboarding/create-first-board-view.js":function(e,t,a){function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const i=a("./app/scripts/views/lib/alerts.js"),n=a("./app/scripts/db/auth.js"),o=a("./app/scripts/controller/index.js"),c=a("./app/scripts/views/internal/view.js"),l=a("./node_modules/underscore/underscore.js"),d=a("./app/scripts/views/internal/teacup-with-helpers.js")("onboarding"),p=a("./node_modules/react/index.js"),u=a("./packages/react-dom-wrapper/index.ts"),h=a("./app/scripts/views/onboarding/create-first-board.js"),{ErrorBoundary:m}=a("./app/src/components/ErrorBoundary/index.ts"),{Feature:g}=a("./app/scripts/debug/constants.ts");class b extends c{static initClass(){this.prototype.tagName="div",this.prototype.className="first-board-wrapper"}render(){return this.$el.html(d.renderable((()=>d.div(".first-board-wrapper.js-create-first-board")))),u.render(p.createElement(m,{tags:{ownershipArea:"trello-bizteam",feature:g.Madlibs}},p.createElement(h,{onSubmit:e=>this.createBoard(e)})),this.$(".js-create-first-board")[0]),this}createCollection(e,t,...a){const[i]=Array.from(a.slice(0,a.length-0));return e.filter((e=>""!==e.name)).map((({name:e},a)=>t.create(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({name:e,pos:a+1,creationMethod:"assisted"},i))))}createBoard(e){const t={name:e.name},a=l.extend({prefs_permissionLevel:"private",prefs_selfJoin:!0,prefs_background:"lime",creationMethod:"assisted",defaultLists:!1},t),s=n.me().boardList.create(t,{requestData:a,success:e=>{let t,a;if(a=e.id,!Array.from(t=n.me().get("idBoards")).includes(a))return n.me().set("idBoards",t.concat(e.id))},error:()=>i.flash("could not create board","error","createBoardError")});return this.listenTo(this.model.boardList,"sync",(()=>{const t=this.createCollection(e.lists,s.listList);return this.listenTo(t[0],"sync",(()=>{const a=this.createCollection(e.lists[0].cards,t[0].cardList),r=e.checkItem;return l.isEmpty(r)?this.navigateToNewBoard(s):this.listenTo(a[0],"sync",(()=>{const e=this.createCollection(["Checklist"],a[0].checklistList,{idCard:a[0].id})[0];return this.listenTo(e,"sync",(()=>{const t=this.createCollection([{name:r}],e.checkItemList)[0];return this.listenTo(t,"sync",(()=>this.navigateToNewBoard(s)))}))}))}))}))}navigateToNewBoard(e){return n.me().dismiss("create-first-board"),o.displayBoard({idBoard:e.id,openListComposer:!1,openCardComposerInFirstList:!0}).done()}}b.initClass(),e.exports=b},"./app/scripts/views/onboarding/create-first-board.js":function(e,t,a){const s=a("./packages/browser/index.ts"),r=a("./node_modules/react/index.js"),i=a("./app/scripts/views/internal/recup-with-helpers.js")("onboarding"),n=a("./app/scripts/lib/localize.js"),{trackUe:o}=a("./packages/analytics/index.ts"),{featureFlagClient:c}=a("./packages/feature-flag-client/index.ts"),{BOARD_NAME:l,LIST_NAME:d,CARD_NAME:p,CHECKITEM_NAME:u,CARD_DRAG:h,getInitialData:m,translatedCardDragFileMap:g,translatedCardBackFileMap:b}=a("./app/scripts/views/onboarding/constants.js"),{getTranslatedFile:f}=a("./app/scripts/views/onboarding/helpers.js"),{CreateFirstBoardIds:v}=a("./packages/test-ids/index.ts"),w=a("./packages/locale/index.ts"),y=a("./node_modules/uuid/v4.js"),C=s.isIE()||s.isEdge(),j=y();class k extends r.Component{static initClass(){this.prototype.render=i.renderable((function(){const{currentStep:e,hasStarted:t}=this.state;return i.div(".first-board-container",(()=>(c.get("activation.onboarding_v2",!1)&&!t&&i.button(".button.first-board-back-button",{onClick:()=>this.handleClickBack()},(()=>i.format("go-back"))),i.div(".first-board-column.first-board-image.board-name-background",{role:"presentation","aria-hidden":!0},(()=>i.div(".first-board-image-wrapper",(()=>i.div(".first-board-image-base",{className:i.classify({"first-board-image-base--mod-card-drag":e===h,"first-board-image-base--mod-ie":e===u&&C})},(()=>this.renderPreview())))))),i.div(".first-board-column.first-board-content-wrapper",(()=>i.div(".first-board-content",(()=>(i.nav(".first-board-navigation",(()=>(i.a(".skip-nav",{href:"#".concat(j),ref:e=>this.skipRef=e},(()=>i.format("skip-nav"))),this.steps.map(((t,a)=>i.createElement("button",{key:"nav".concat(a),className:i.classify({"current-step":t===e}),onClick:()=>this.goToStep(t,"by clicking navigation dot"),"aria-label":i.l("go-to-step:".concat(t))})))))),i.div(".first-board-text-wrapper",{"aria-live":"polite"},(()=>i.div(".first-board-text",{id:j},(()=>(this.renderStepChildren(),this.renderFooter())))))))))))))}))}constructor(e){super(...arguments),this.steps=[l,d,p,u,h];let t=new URLSearchParams(window.location.search).get("selectedVertical");t||(t="default"),this.state={currentStep:l,board:m(t),saving:!1,hasStarted:!1,selectedVertical:t},this.handleClickBack=this.handleClickBack.bind(this)}skipToContent(){return null!=this.skipRef?this.skipRef.click():void 0}validate(){const{currentStep:e,board:t,selectedVertical:a}=this.state,s=m(a);return e===l?""!==t.name:e===d?t.lists.filter((e=>""!==e.name)).length===s.lists.length:e!==p||""!==t.lists[0].cards[0].name}continue(){return this.isLastStep()?this.submit():this.goToStep(this.steps[this.steps.indexOf(this.state.currentStep)+1],"by clicking on continue footer")}submit(e){let t;null==e&&(e=!1);const a=m(this.state.selectedVertical);if(this.state.saving)return;const s=this.state.board;for(""===s.name.trim()&&(s.name=a.defaultValue),t=0;t<s.lists.length;t++){const e=s.lists[t];""===e.name.trim()&&(e.name=a.lists[t].name)}for(t=0;t<s.lists[0].cards.length;t++){const e=s.lists[0].cards[t];""===e.name.trim()&&(e.name=a.lists[0].cards[t].defaultValue||"")}return""===s.checkItem.trim()&&(s.checkItem=""),o("create first board view","creates","board","","",e?"by clicking skip":"by clicking on the submit footer",{currentStep:this.state.currentStep,stepCompleted:this.validate(),vertical:this.state.selectedVertical}),this.setState({saving:!0},(()=>this.props.onSubmit(s)))}isLastStep(){return this.steps.indexOf(this.state.currentStep)===this.steps.length-1}goToStep(e,t){o("create first board view","navigates","","","to new step",t,{currentStep:this.state.currentStep,nextStep:e,stepCompleted:this.validate(),vertical:this.state.selectedVertical});const a=this.state,s=m(this.state.selectedVertical);return e!==l&&e!==d?(a.board.lists[1].cards=[],a.board.lists[2].cards=[]):(a.board.lists[1].cards=s.lists[1].cards,a.board.lists[2].cards=s.lists[2].cards),a.currentStep=e,a.hasStarted=!0,this.setState(a),this.skipToContent()}handleClickBack(){return window.history.back()}updateBoard(e){return this.setState({board:Object.assign(this.state.board,{name:e})})}updateList(e,t){const a=this.state;return this.setState((()=>(a.board.lists[e]={name:t,cards:this.state.board.lists[e].cards},a)))}updateCard(e,t){const a=this.state;return this.setState((()=>(a.board.lists[0].cards[e]={name:t},a)))}updateCheckItem(e){const t=this.state;return this.setState((()=>(t.board.checkItem=e,t)))}handleClickFooter(e){if(0!==e.detail)return this.continue()}handleKeyPressSubmit(e){if(this.validate()&&"Enter"===e.key)return this.continue()}handleListKeyPress(e,t){if(this.validate()&&"Enter"===e.key)return[0,1].includes(t)?this["listInputRef".concat(t+1)].select():this.continue()}renderStepChildren(){const{currentStep:e,board:t,selectedVertical:a}=this.state;return e===l?i.section(".".concat(l),(()=>(i.h1((()=>i.format("".concat(l,":").concat(a,":title")))),i.p((()=>(i.format("".concat(l,":").concat(a,":description")),i.span(".show-point-right",{role:"presentation","aria-hidden":!0},(()=>i.format("that-thing-over-there"))),i.span(".show-point-up",{role:"presentation","aria-hidden":!0},(()=>i.format("that-thing-up-there")))))),i.p((()=>i.format("".concat(l,":").concat(a,":instructions")))),i.input({type:"text",placeholder:i.l("".concat(l,":").concat(a,":placeholder:0")),maxLength:"32",value:t.name,onChange:e=>this.updateBoard(e.target.value),onKeyPress:e=>this.handleKeyPressSubmit(e),"data-test-id":v.BoardNameInput,ref:e=>this.ref0=e,"aria-label":i.l("board-name")})))):e===d?i.section(".".concat(d),(()=>(i.h1((()=>i.format("".concat(d,":").concat(a,":title")))),i.p((()=>i.format("".concat(d,":").concat(a,":description")))),i.p((()=>i.format("".concat(d,":").concat(a,":instructions")))),i.input({type:"text",value:t.lists[0].name,maxLength:"16",onChange:e=>this.updateList(0,e.target.value),onKeyPress:e=>this.handleListKeyPress(e,0),"data-test-id":v.ListNameInput,ref:e=>this.listInputRef0=e,"aria-label":i.l("list-name",{list_number:1})}),i.input({type:"text",value:t.lists[1].name,maxLength:"16",onChange:e=>this.updateList(1,e.target.value),onKeyPress:e=>this.handleListKeyPress(e,1),ref:e=>this.listInputRef1=e,"aria-label":i.l("list-name",{list_number:2})}),i.div(".third-input",(()=>(i.span((()=>i.format("and"))),i.input({type:"text",maxLength:"16",value:t.lists[2].name,onChange:e=>this.updateList(2,e.target.value),onKeyPress:e=>this.handleListKeyPress(e,2),ref:e=>this.listInputRef2=e,"aria-label":i.l("list-name",{list_number:3})})))),i.p(".post-input",(()=>i.format("go-ahead-and-rename-your-lists-if-youd-like-a11y")))))):e===p?i.section(".".concat(p),(()=>(i.h1((()=>i.format("".concat(p,":").concat(a,":title")))),i.p((()=>i.format("".concat(p,":").concat(a,":description")))),i.p((()=>i.span({dangerouslySetInnerHTML:{__html:i.l("".concat(p,":").concat(a,":instructions"),{listName:t.lists[0].name})}}))),i.input({type:"text",placeholder:i.l("".concat(p,":").concat(a,":placeholder:0")),maxLength:"32",value:t.lists[0].cards[0].name,onChange:e=>this.updateCard(0,e.target.value),onKeyPress:e=>this.handleKeyPressSubmit(e),"data-test-id":v.CardNameInput,ref:e=>this.ref0=e,"aria-label":i.l("card-name",{card_number:1})}),i.input({type:"text",placeholder:i.l("".concat(p,":").concat(a,":placeholder:1")),maxLength:"32",value:t.lists[0].cards[1].name,onChange:e=>this.updateCard(1,e.target.value),onKeyPress:e=>this.handleKeyPressSubmit(e),"aria-label":i.l("card-name",{card_number:2})}),i.div(".third-input",(()=>(i.span((()=>i.format("and"))),i.input({type:"text",placeholder:i.l("".concat(p,":").concat(a,":placeholder:2")),maxLength:"32",value:t.lists[0].cards[2].name,onChange:e=>this.updateCard(2,e.target.value),onKeyPress:e=>this.handleKeyPressSubmit(e),"aria-label":i.l("card-name",{card_number:3})}))))))):e===u?i.section(".".concat(u),(()=>(i.h1((()=>i.format("".concat(u,":").concat(a,":title")))),i.p((()=>i.format("".concat(u,":").concat(a,":description")))),i.p({dangerouslySetInnerHTML:{__html:i.l("".concat(u,":").concat(a,":instructions"),{cardName:t.lists[0].cards[0].name})}}),i.div(".checklist-item",(()=>(i.div(".checklist-box"),i.input({type:"text",placeholder:i.l("".concat(u,":").concat(a,":placeholder:0")),maxLength:"28",value:t.checkItem,onChange:e=>this.updateCheckItem(e.target.value),onKeyPress:e=>this.handleKeyPressSubmit(e),"data-test-id":v.ChecklistInput,ref:e=>this.ref0=e,"aria-label":i.l("checklist-name")}))))))):e===h?i.section(".".concat(h),(()=>(i.h1((()=>i.format("".concat(h,":default:title")))),i.p((()=>i.format("".concat(h,":default:description"))))))):void 0}renderPreview(){const{currentStep:e,board:t,hasStarted:a}=this.state,s=t.lists[0].cards[0];return e===h?(i.img({src:f(g,w.currentLocale)}),i.div((()=>(i.h2((()=>i.format("one-last-tip"))),i.p((()=>i.format("get-those-cards-moving"))))))):(i.div(".board-name-display",(()=>i.p({className:i.classify({"is-active":!!t.name}),"data-test-id":v.BoardNameDisplay},(()=>i.text(t.name))))),i.div(".first-board-image-list-container",(()=>(()=>{const e=[];for(const s in t.lists){const r=t.lists[s];e.push(i.div(".first-board-image-list.list-name-display",{className:i.classify({"first-board-image-list-empty":0===r.cards.length})},(()=>(i.p({className:i.classify({"is-active":a&&""!==r.name}),"data-test-id":"0"===s?v.ListNameDisplay:void 0},(()=>{if(a)return i.text(r.name)})),(()=>{const e=[];for(const t in r.cards){const a=r.cards[t];e.push(i.div(".first-board-image-card.card-name-display",{className:i.classify({large:!!a.large})},(()=>i.p({className:i.classify({"is-active":!!a.name}),"data-test-id":"0"===s&&"0"===t?v.CardNameDisplay:void 0},(()=>i.text(a.name))))))}return e})()))))}return e})())),e===u?i.div(".first-board-card-back",(()=>(i.img({src:f(b,w.currentLocale),className:"check-name-image"}),i.div(".check-name-display",(()=>(i.p((()=>i.text(s.name||n("untitled card")))),t.checkItem?i.p({"data-test-id":v.ChecklistDisplay},(()=>i.text(t.checkItem))):i.p(".check-name-placeholder",(()=>i.format("add-an-item"))))))))):void 0)}renderFooter(){const{currentStep:e,saving:t}=this.state;return i.button({key:"next-button:".concat(e),className:i.classify({"first-board-continue-footer":!0,"is-active":this.validate()&&!t,"submit-footer":this.isLastStep(),disabled:!this.validate()||t}),onClick:e=>this.handleClickFooter(e),onKeyDown:e=>this.handleKeyPressSubmit(e),"data-test-id":v.ContinueButton,disabled:!this.validate()||t,ref:e=>this.footer=e,"aria-label":this.isLastStep()?i.l("go-to-my-board"):i.l("next-step")},(()=>this.isLastStep()?i.format("now-youre-a-pro-keep-building-your-board"):i.icon("down",{role:"presentation","aria-hidden":!0})))}}k.initClass(),e.exports=k},"./app/scripts/views/onboarding/welcome-view.js":function(e,t,a){const s=a("./app/scripts/views/internal/view.js"),r=a("./app/scripts/views/internal/teacup-with-helpers.js")("onboarding"),i=a("./node_modules/react/index.js"),n=a("./packages/react-dom-wrapper/index.ts"),o=a("./app/scripts/views/onboarding/welcome.js");class c extends s{static initClass(){this.prototype.tagName="div",this.prototype.className="welcome-wrapper"}render(){return this.$el.html(r.renderable((()=>r.div(".js-welcome")))),n.render(i.createElement(o,null),this.$(".js-welcome")[0]),this}}c.initClass(),e.exports=c},"./app/scripts/views/onboarding/welcome.js":function(e,t,a){const s=a("./node_modules/underscore/underscore.js"),r=a("./app/scripts/models/board.js"),i=a("./app/scripts/controller/index.js"),n=a("./node_modules/react/index.js"),o=a("./app/scripts/db/auth.js"),{sendErrorEvent:c}=a("./packages/error-reporting/index.ts"),l=a("./app/scripts/views/internal/recup-with-helpers.js")("onboarding"),{trackUe:d}=a("./packages/analytics/index.ts"),{verticals:p}=a("./app/scripts/views/onboarding/constants.js"),{copyBoardFromVertical:u,getLocale:h,getBoardDataForVertical:m}=a("./app/scripts/views/onboarding/helpers.js"),{navigate:g}=a("./app/scripts/controller/navigate.js"),{DownIcon:b}=a("./packages/nachos/icons/down.tsx");class f extends n.Component{static initClass(){this.prototype.render=l.renderable((function(){const{selectedVertical:e,saving:t}=this.state,{fullName:s}=o.me().attributes;return l.div(".welcome",(()=>{if(l.div(".welcome--logo",(()=>l.img({src:a("./resources/images/trello-logo-gray.svg")}))),l.div(".welcome--intro",(()=>(l.h1((()=>l.format("welcome"))),l.h1((()=>l.format("what-brings-you-to-trello"))),l.p((()=>l.format("let-us-know-personalize")))))),l.div(".welcome--card",(()=>(l.div(".welcome--card-text-small",(()=>l.format("hello-my-name-is"))),l.h1((()=>l.text(s))),l.div(".welcome--card-text-small",(()=>l.format("and-i-am-interested-in-trello-for"))),l.div(".welcome--select",(()=>(l.addElement(n.createElement(b,{block:!0})),l.select({class:l.classify({"welcome--select-placeholder":null===e}),onChange:e=>this.handleChangeSelect(e)},(()=>(l.option(".welcome--select-option.welcome--select-option--default",{value:"choose-something"},(()=>l.text(l.l("choose-something")))),(()=>{const e=[];for(const{key:t}of Array.from(this.verticals))e.push(l.option(".welcome--select-option",{value:t},(()=>l.text(l.l(t)))));return e})()))))))))),null!==e)return l.div(".welcome--cta-container",(()=>{})),p[e].inspirationBoards[this.locale]&&"other"!==e?(l.button(".welcome--cta-container--button.welcome--cta-container--button-blue",{onClick:e=>this.handleDiveIn(e),disabled:t,class:l.classify({disabled:t})},(()=>l.format("dive-right-in"))),l.button(".welcome--cta-container--button",{onClick:e=>this.handleGetStarted(e),disabled:t,class:l.classify({disabled:t}),ref:e=>this.ctaButton=e},(()=>l.format("help-me-get-started")))):l.button(".welcome--cta-container--button.welcome--cta-container--button-blue",{onClick:e=>this.handleGetStarted(e),disabled:t,class:l.classify({disabled:t}),ref:e=>this.ctaButton=e},(()=>l.format("get-started")))}))}))}constructor(){super(...arguments);const e=Object.keys(p).map((e=>Object.assign(p[e],{key:e}))),[t,a]=Array.from(s.partition(e,(e=>!isNaN(e.sortId))));this.verticals=t.sort(((e,t)=>e.sortId-t.sortId)).concat(s.shuffle(a)),this.locale=h(),this.state={selectedVertical:null,saving:!1}}handleChangeSelect(e){return d("Welcome Screen","changes vertical",e.target.value,"","","",{lastVertical:this.state.selectedVertical,nextVertical:e.target.value}),"choose-something"===e.target.value?this.setState({selectedVertical:null}):this.setState({selectedVertical:e.target.value},(()=>this.ctaButton.scrollIntoView({behavior:"smooth"})))}handleGetStarted(e){d("Welcome Screen","clicks","get started","","","",{vertical:this.state.selectedVertical});const t="other"===this.state.selectedVertical?"default":this.state.selectedVertical;return g("/create-first-board?selectedVertical=".concat(t),{trigger:!0})}handleDiveIn(){const e=this.state.selectedVertical;return d("Welcome Screen","clicks","dive in","","","",{vertical:e}),this.setState({saving:!0}),u(this.modelCache,e).catch((function(){c(new Error("Error copying board"),{extraData:{url:"welcome.js",line:"58",col:"58",source:"Welcome Screen",vertical:e},tags:{feature:"Personalized Onboarding"}});const{name:t}=m(e);return r.assistedCreate(t)})).then((e=>i.displayBoard({idBoard:e.id,openListComposer:!1}))).catch((()=>i.displayErrorPage())).finally((()=>this.setState({saving:!1})))}}f.initClass(),e.exports=f},"./app/src/components/CardDetailLoading/index.ts":function(e,t,a){"use strict";a.r(t),a.d(t,"CardDetailLoading",(function(){return p}));var s=a("./node_modules/react/index.js"),r=a.n(s),i=a("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),n=a.n(i),o=a("./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/CardDetailLoading/CardDetailLoading.less"),c={insert:"head",singleton:!1},l=(n()(o.a,c),o.a.locals||{}),d=a("./packages/nachos/src/components/Spinner/index.ts");const p=()=>r.a.createElement("div",{className:"".concat(l.cardDetailLoading)},r.a.createElement(d.a,{centered:!0}))},"./app/src/components/CardDetailLoadingError/index.ts":function(e,t,a){"use strict";a.r(t),a.d(t,"CardDetailLoadingError",(function(){return g}));var s=a("./node_modules/react/index.js"),r=a.n(s),i=a("./packages/nachos/button.ts"),n=a("./packages/i18n/index.ts"),o=a("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),c=a.n(o),l=a("./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/CardDetailLoadingError/CardDetailLoadingError.less"),d={insert:"head",singleton:!1},p=(c()(l.a,d),l.a.locals||{});const u=Object(n.forTemplate)("error"),h=Object(n.forTemplate)("connect_failed"),m=()=>window.location.reload(),g=e=>(Object(s.useEffect)((()=>{const e=document.querySelector(".window");return null!==e&&(e.style.display="block",document.body.classList.add("window-up")),()=>{null!==e&&(e.style.display="none",document.body.classList.remove("window-up"))}})),r.a.createElement("div",{className:"".concat(p.errorMessage)},r.a.createElement("button",{className:"icon-md icon-close dialog-close-button js-close-window",onClick:e.onClose}),r.a.createElement("div",{className:"u-clearfix"},r.a.createElement("img",{alt:"Taco",src:a("./resources/images/taco-sleep.svg")}),r.a.createElement("h4",null,u("card-detail-loading-error")),r.a.createElement("p",null,u("reload-call-to-action")),r.a.createElement(i.Button,{appearance:"primary",onClick:m},h("reload-page")))))},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/CardDetailLoading/CardDetailLoading.less":function(e,t,a){"use strict";var s=a("./node_modules/css-loader/dist/runtime/api.js"),r=a.n(s)()(!1);r.push([e.i,"._1AAWyQJ4LX_Ioq {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: 600px;\n}\n",""]),r.locals={cardDetailLoading:"_1AAWyQJ4LX_Ioq"},t.a=r},"./node_modules/css-loader/dist/cjs.js?!./node_modules/postcss-loader/dist/cjs.js?!./node_modules/less-loader/dist/cjs.js?!./app/src/components/CardDetailLoadingError/CardDetailLoadingError.less":function(e,t,a){"use strict";var s=a("./node_modules/css-loader/dist/runtime/api.js"),r=a.n(s)()(!1);r.push([e.i,"._2DP9EoHN5coOOz {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 600px;\n}\n._2DP9EoHN5coOOz > button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: transparent;\n}\n._2DP9EoHN5coOOz div {\n  display: block;\n  text-align: center;\n  height: 100%;\n}\n._2DP9EoHN5coOOz div h4 {\n  font-size: 20px;\n  margin: 20px 16px 24px;\n}\n._2DP9EoHN5coOOz div p {\n  font-size: 16px;\n  margin: 0 0 16px;\n}\n",""]),r.locals={errorMessage:"_2DP9EoHN5coOOz"},t.a=r},"./resources/images/trello-logo-gray.svg":function(e,t,a){e.exports=a.p+"images/trello-logo-gray.82759daf8483ef18ac10.svg"}}]);
//# sourceMappingURL=board-page.0141c40cfce1ec724f45.js.map